<div class="navbar-sidebar-wrapper">
  <!-- Desktop sidebar -->
  <nav class="scoop-side-navbar" *ngIf="!isMobileView">
    <ul class="scoop-navbar-list">
      <li
        *ngIf="canSeeRegisterItem()"
        routerLink="/registro-usuarios"
        routerLinkActive="active"
        class="scoop-navbar-item"
      >
        <span class="material-icons">person_add</span>
        <span>Registro</span>
      </li>
      <li
        *ngIf="canSeeAdminItems()"
        routerLink="/administrador"
        routerLinkActive="active"
        class="scoop-navbar-item"
      >
        <span class="material-icons">admin_panel_settings</span>
        <span>Admins</span>
      </li>
      <li
        *ngIf="canSeeTeacherItems()"
        routerLink="/maestros"
        routerLinkActive="active"
        class="scoop-navbar-item"
      >
        <span class="material-icons">people</span>
        <span>Maestros</span>
      </li>
      <li
        *ngIf="canSeeStudentItems()"
        routerLink="/alumnos"
        routerLinkActive="active"
        class="scoop-navbar-item"
      >
        <span class="material-icons">school</span>
        <span>Alumnos</span>
      </li>
      <li
        *ngIf="canSeeStudentItems()"
        routerLink="/graficas"
        routerLinkActive="active"
        class="scoop-navbar-item"
      >
        <span class="material-icons">bar_chart</span>
        <span>Gráficas</span>
      </li>
      <li
        *ngIf="canSeeTeacherItems() || canRegisterMaterias()"
        class="scoop-navbar-item"
        (click)="toggleMenu('materias')"
        style="cursor: pointer;"
      >
        <span class="material-icons">library_books</span>
        <span>Materias</span>
        <span class="material-icons" style="margin-left: auto; font-size: 1em;">
          {{ expandedMenu === 'materias' ? 'expand_less' : 'expand_more' }}
        </span>
      </li>
      <ul *ngIf="expandedMenu === 'materias' && (canSeeTeacherItems() || canRegisterMaterias())" style="list-style: none; padding-left: 2rem;">
        <li
          *ngIf="canSeeTeacherItems()"
          routerLink="/materias"
          routerLinkActive="active"
          class="scoop-navbar-item"
          style="padding: 0.7rem 1.2rem;"
        >
          <span class="material-icons">list</span>
          <span>Lista de Materias</span>
        </li>
        <li
          *ngIf="canRegisterMaterias()"
          routerLink="/registro-materias"
          routerLinkActive="active"
          class="scoop-navbar-item"
          style="padding: 0.7rem 1.2rem;"
        >
          <span class="material-icons">add_circle</span>
          <span>Registro de Materias</span>
        </li>
      </ul>
      <li
        *ngIf="canSeeTeacherItems()"
        routerLink="/eventos-academicos"
        routerLinkActive="active"
        class="scoop-navbar-item"
      >
        <span class="material-icons">event</span>
        <span>Eventos Académicos</span>
      </li>
    </ul>
    <button class="scoop-logout-btn" (click)="logout()">
      <span class="material-icons">logout</span>
      <span>Cerrar sesión</span>
    </button>
  </nav>

  <!-- Scoop-style top navbar -->
  <nav class="scoop-navbar">
    <button
      class="dashboard-toggle-btn"
      *ngIf="isMobileView"
      (click)="toggleSidebar()"
      aria-label="Abrir menú"
    >
      <span class="material-icons">menu_open</span>
    </button>
    <span class="scoop-navbar-logo">BUAP</span>
    <div class="scoop-navbar-icons">
      <span
        class="material-icons navbar-icon"
        (click)="togglePalette()"
        style="cursor: pointer"
        >palette</span
      >
      <div class="scoop-navbar-avatar" *ngIf="userInitial">
        {{ userInitial }}
      </div>
    </div>
  </nav>

  <!-- Mobile sidebar overlay and menu -->
  <ng-container *ngIf="isMobileView">
    <div
      class="mobile-sidebar-overlay"
      [ngClass]="{ 'mobile-open': mobileOpen }"
      (click)="closeSidebar()"
    ></div>
    <nav class="scoop-side-navbar" [ngClass]="{ 'mobile-open': mobileOpen }">
      <ul class="scoop-navbar-list">
        <li
          *ngIf="canSeeRegisterItem()"
          routerLink="/registro-usuarios"
          routerLinkActive="active"
          class="scoop-navbar-item"
          (click)="closeSidebar()"
        >
          <span class="material-icons">person_add</span>
          <span>Registro</span>
        </li>
        <li
          *ngIf="canSeeAdminItems()"
          routerLink="/administrador"
          routerLinkActive="active"
          class="scoop-navbar-item"
          (click)="closeSidebar()"
        >
          <span class="material-icons">admin_panel_settings</span>
          <span>Admins</span>
        </li>
        <li
          *ngIf="canSeeAdminItems()"
          routerLink="/maestros"
          routerLinkActive="active"
          class="scoop-navbar-item"
          (click)="closeSidebar()"
        >
          <span class="material-icons">people</span>
          <span>Maestros</span>
        </li>
        <li
          *ngIf="canSeeStudentItems()"
          routerLink="/alumnos"
          routerLinkActive="active"
          class="scoop-navbar-item"
          (click)="closeSidebar()"
        >
          <span class="material-icons">school</span>
          <span>Alumnos</span>
        </li>
        <li
          *ngIf="canSeeStudentItems()"
          routerLink="/graficas"
          routerLinkActive="active"
          class="scoop-navbar-item"
          (click)="closeSidebar()"
        >
          <span class="material-icons">bar_chart</span>
          <span>Gráficas</span>
        </li>
        <li
          *ngIf="canSeeTeacherItems() || canRegisterMaterias()"
          class="scoop-navbar-item"
          (click)="toggleMenu('materias')"
          style="cursor: pointer;"
        >
          <span class="material-icons">library_books</span>
          <span>Materias</span>
          <span class="material-icons" style="margin-left: auto; font-size: 1em;">
            {{ expandedMenu === 'materias' ? 'expand_less' : 'expand_more' }}
          </span>
        </li>
        <ul *ngIf="expandedMenu === 'materias' && (canSeeTeacherItems() || canRegisterMaterias())" style="list-style: none; padding-left: 2rem;">
          <li
            *ngIf="canSeeTeacherItems()"
            routerLink="/materias"
            routerLinkActive="active"
            class="scoop-navbar-item"
            style="padding: 0.7rem 1.2rem;"
            (click)="closeSidebar()"
          >
            <span class="material-icons">list</span>
            <span>Lista de Materias</span>
          </li>
          <li
            *ngIf="canRegisterMaterias()"
            routerLink="/registro-materias"
            routerLinkActive="active"
            class="scoop-navbar-item"
            style="padding: 0.7rem 1.2rem;"
            (click)="closeSidebar()"
          >
            <span class="material-icons">add_circle</span>
            <span>Registro de Materias</span>
          </li>
        </ul>
        <li
          *ngIf="canSeeTeacherItems()"
          routerLink="/eventos-academicos"
          routerLinkActive="active"
          class="scoop-navbar-item"
          (click)="closeSidebar()"
        >
          <span class="material-icons">event</span>
          <span>Eventos Académicos</span>
        </li>
      </ul>
      <button class="scoop-logout-btn" (click)="logout(); closeSidebar()">
        <span class="material-icons">logout</span>
        <span>Cerrar sesión</span>
      </button>
    </nav>
  </ng-container>
  <!-- end navbar-sidebar-wrapper -->
</div>
